# Cloud-Native 

> 请配合slides食用

## Why Microservices?

近年来，微服务越来越受欢迎，一些公司正在将单应用程序迁移到微服务。 微服务允许开发人员独立开发和部署服务，并简化敏捷流程的采用。 但是，许多公司仍然对迁移犹豫不决，因为他们认为微服务是一种炒作，或者因为他们不了解迁移过程以及与迁移相关的好处和问题。

很多比较old school的程序员总是声称不能面向潮流开发，解决问题才是最核心的本事，相对来说，年轻的程序员对于新概念的接受能力就强许多

所以今天带给大家的第一篇论文就是这篇论文采访了已经将单应用迁移到了微服务并且运行了微服务至少两年的从业人员，从他们的角度去看微服务到底怎么样

所以接下来我会给大家介绍，为什么要迁移，迁移后微服务带来的一些问题，收益

### Motivations

* **可维护性**：微服务第一点一定会吹嘘的是微服务具有很好的可维护性，因此这也是动机中排行最高的一项，微服务的模块化架构允许降低单系统的复杂性。

  将系统分解为独立且可自我部署的服务使开发人员团队能够独立于其他开发人员进行更改和测试其服务，从而简化分布式开发。

  而且，每个微服务的小尺寸有助于提高代码可理解性，从而有助于提高代码的可维护性。

* **小团体负责**：由于微服务没有外部依赖性，它们可以由不同的团队独立开发，减少了通信开销和团队之间协调的需要。

  每个团队拥有代码库，可以负责每项服务的开发; 它可以根据需要维护独立的修订和构建环境。团队之间明确和独立责任的分配允许将大型项目团队分成几个小而高效的团队。

  此外，由于微服务可以使用不同的技术和完全不同的内部结构进行开发，因此只需要在团队之间协调高级别和技术决策，而其他技术决策可以由团队自己进行。

* **容错**：微服务的失败通常不会影响整个系统。相反，在单应用程序中，组件的故障可能会破坏整个系统。 此外，可以快速重启故障微服务。可以自动将错误的微服务替换为同一服务的先前版本，以提供正确的输出，而无需重新启动整个应用程序。

* 第四点很有趣，很多人选择微服务是因为很多人选择微服务。微服务很酷，很多大公司正在采用它们，比如网飞。因此，一些从业者开始感兴趣并开始研究微服务的潜力，在测试环境中使用微服务或实现一些非关键功能后，他们也开始将其用于其他功能

* 每个微服务的团队人员都可以采用自己的一套devops工具链。由于每个服务都可以独立开发和部署，因此每个团队都可以独立于其他团队轻松开发，测试和部署他们的服务。

### Issues

* 数据库迁移和数据拆分：需要仔细解决遗留数据库的迁移问题。一方面，大部分受访者采用了连接到遗留数据库或现有数据库集群的微服务架构，即使这会部分地降低微服务的好处，主要原因是拆分现有数据库实在是一个太困难的事情了。

  另一方面，微服务实践要求每个微服务访问其自己的私有数据库。如果不拆分，首先每个微服务都有权利去修改数据库，这意味着服务间数据的紧耦合；另一方面，当一个服务出现问题时，它影响就可能不再是自己的服务了，而可能影响好几个服务。

* 估计基于微服务的系统的开发时间被认为不如估计单系统准确。尽管最初的想法，项目开始时的工作开销应该更高，但是一旦系统的初始设置完成就会降低。受访者报告说，与开发所需的工作量相比，工作量增加了近20％。但是，受访者同样表示，增加可维护性和可扩展性的好处大大补偿了额外的工作量。

* 第三个问题来自于人，对于一些开发人员来说，现有架构变化通常是个大问题。受访者表示说，老派开发者并不总是相信新技术。此外，他们中的很多人认为遗留系统是他们自己创造的，并且不愿意接受他们所写软件经历这种重大的迁移变化。另一方面，大部分开发人员没有微服务开发经验，这导致他们拆分的服务要么太过细碎，要么过于庞大。

* 现有库需要更多的转换工作。它们不能简单地重复使用，而是需要转换成一个或多个微服务，甚至可能需要直接重写库，这又需要额外的努力。

* 最后是学习devops的负担。对于所有参与者，采用微服务需要采用DevOps基础设施，这是一个好处，这同样是一个负担。采用完整的DevOps工具链需要付出很多努力，除了开发工作之外，还需要考虑这些工作。

### Benefits

* Maintainability Improvement

* System Understandability

* ROI

* Architectural Complexity Reduction

* Simplifies Distributed Work

## Introducing Cloud Native

### Cloud Native Features

那么如何去构建一个微服务呢？现在如果我们说我要构建一个微服务，实际上就构建一个云原生的应用。云原生不只是说微服务的一个架构，它完全就是一个现代服务构建指南，如何生产一个现代化的微服务应用

* 首先是CI/CD，频繁发布，快速交互，快速反馈，降低发布风险；

* 其次是devops；

* 第三点，容器化，软件应用的进程包装在容器中单独运行；

* 第四点，微服务，应用是遵守微服务的特点的，应用间通过网络通信，应用可以独立部署、更新，扩展和重启

### Open Issues in Scheduling Containers

要构建基于微服务的应用程序拓扑，需要使用众所周知的标准来描述微服务。 例如，我们通常会使用YAML文件以及通常的图像表示来建立微服务描述。 此外，与不同微服务相关的工作负载相互依赖，一个微服务的执行和数据流的变化将影响其他微服务的执行和数据流。 总的来说，拓扑规范和组合需要涵盖整个生命周期。

* 尽管现在的标准支持拓扑模式规范，但它缺乏对描述数据和控制微服务之间的流依赖性的支持；微服务在工作负载特性方面的属性（如数据格式，查询速率和运行时I / O依赖性）。因此，一个重要的研究方向是研究微服务组合框架，这将促进知识重用，并使工程师更容易与复杂的计算平台交互。

* 不同的容器，它的需求可能不一样。对于某些微服务（例如压缩服务器），存储要求占主导地位，比如数据库服务器的事务查询处理，计算要求占主导地位，比如VPN服务器，通信要求占主导地位。因此，容器编排必须考虑组合哪些微服务以最小化工作负载干扰和争用。平衡资源消耗和性能会是一个课题。

  另外一方面，容器间的隔离和性能也是一个话题。我们希望在有限的资源下可以运行的容器更多，更快，更安全。这一方面可以从容器编排入手去研究，一方面也可以从容器本身的角度的做研究。后面我要向大家介绍的两个内容就是关于container一些的研究

* 刚刚已经说了，不同的应用需求不一样，所以监控这个服务的角度也不一样。对于CPU资源，监控的是利用率和吞吐量; 对于SQL和NoSQL数据库微服务，监控的是查询响应时间。 因此，如何跨微服务一致地制定性能指标以提供数据和控制流的整体视图仍然是一个悬而未决的问题。

  集群计算时代流行的监控工具仅关注监控数据中心资源级别的性能指标（例如CPU百分比和TCP / IP性能），但不关心 微服务级别（例如端到端请求处理延迟和通信开销）。Kubernetes（Heapster）使用的监控框架通常监控CPU，内存，文件系统和网络使用情况统计信息，也无法监控微服务级别的性能指标。后面学长要介绍的论文就是从应用的角度的监控，微服务的监控，分布式应用的监控